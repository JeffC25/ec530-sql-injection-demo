<!DOCTYPE html>
<html>
<head>
    <title>Super Secret Bank</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        function getUser() {
            let results = document.getElementById("results");
            let username = document.getElementById("username").textContent; // Don't question why the username is grabbed this way...
            fetch("/api/user", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({ username: username })
            })
            .then(response => {
                if (response.status == 404) {
                    throw new Error("Failed to fetch user data");
                }
                return response.json();
            })
            .then(data => {
                results.innerHTML = `
                    <div class="p-1">
                        <div class="text-orange-500 text-sm">ID</div>
                        <div class="text-neutral-800 ">${data.id}</div>
                    </div>
                    <div class="h-px bg-neutral-300 w-full"></div>
                    <div class="p-1">
                        <div class="text-orange-500 text-sm">UserName</div>
                        <div class="text-neutral-800 ">${data.username}</div>
                    </div>
                    <div class="h-px bg-neutral-300 w-full"></div>
                    <div class="p-1">
                        <div class="text-orange-500 text-sm">Name</div>
                        <div class="text-neutral-800 ">${data.name}</div>
                    </div>
                    <div class="h-px bg-neutral-300 w-full"></div>
                    <div class="p-1">
                        <div class="text-orange-500 text-sm">Date of Birth</div>
                        <div class="text-neutral-800 ">${data.birthday}</div>
                    </div>
                    <div class="h-px bg-neutral-300 w-full"></div>
                    <div class="p-1">
                        <div class="text-orange-500 text-sm">Secret</div>
                        <div class="text-neutral-800 ">${data.secret}</div>
                    </div>
                    <div class="h-px bg-neutral-300 w-full"></div>
                    <div class="p-1">
                        <div class="text-orange-500 text-sm">Occupation</div>
                        <div class="text-neutral-800 ">${data.occupation}</div>
                    </div>
                    <div class="h-px bg-neutral-300 w-full"></div>
                    <div class="p-1">
                        <div class="text-orange-500 text-sm">Email</div>
                        <div class="text-neutral-800 ">${data.email}</div>
                    </div>
                    <div class="h-px bg-neutral-300 w-full"></div>
                    <div class="p-1">
                        <div class="text-orange-500 text-sm">Address</div>
                        <div class="text-neutral-800 ">${data.address}</div>
                    </div>
                    <div class="h-px bg-neutral-300 w-full"></div>
                    <div class="p-1">
                        <div class="text-orange-500 text-sm">Favorite Color</div>
                        <div class="text-neutral-800 ">${data.favorite_color}</div>
                    </div>
                    <div class="h-px b-pxeutral-300 w-full"></div>
                    <div class="p-1">
                        <div class="text-orange-500 text-sm">Tacos Eaten in Lifetime</div>
                        <div class="text-neutral-800 ">${data.total_tacos_eaten}</div>
                    </div>
                `;
            }).catch(error => {
                results.innerHTML = `<div class="p-1 text-center text-red-500">Error fetching user data</div>`;
            });
        }
    </script>
</head>
<body class="bg-neutral-100">
    <div class="bg-white xl:w-1/3 lg:w-1/2 w-3/4 rounded-lg m-12 shadow-md mx-auto">
        <div class="bg-gradient-to-r from-orange-500 to-amber-500 p-4 text-white rounded-t-lg">
            <h1 class="text-3xl font-semibold">Super Secret Bankâ„¢</h1>
        </div>
        <div class="px-4">
            <h3 class="text-center block mx-auto p-4 text-neutral-800">Logged in as:
                <span id="username" class="font-semibold text-orange-500">user123</span><!-- Pretend username is fetched from auth context -->
            </h3>
            <button onclick="getUser()" class="rounded-md shadow-md p-2 text-center w-fit mx-auto block font-semibold bg-amber-500 hover:bg-orange-500 text-white">Fetch Secret Info</button>
        </div>
        <div id="results" class="p-4">
    </div>
</body>
</html>